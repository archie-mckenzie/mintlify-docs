---
title: "MDX APIページをOpenAPIナビゲーションへ移行する"
sidebarTitle: "MDXからの移行"
description: "個別のMDXエンドポイントページから、柔軟なナビゲーションを備えたOpenAPIの自動生成へ移行"
icon: "arrow-big-right-dash"
---

現在、APIエンドポイントに個別の `MDX` ページを使用している場合は、各ページのカスタマイズ性を維持したまま、OpenAPI仕様からページを自動生成する方式へ移行できます。これにより、管理するファイル数を減らし、APIドキュメントの一貫性を高められます。

各エンドポイントのメタデータとコンテンツはOpenAPI仕様内で定義でき、ナビゲーション上で任意の位置にエンドポイントを配置して整理できます。

<div id="cli-migration">
  ## CLIの移行
</div>

`mint migrate-mdx` コマンドは、MDXのエンドポイントページから自動生成ページへの移行に推奨される方法です。

このコマンドは次を実行します:

* `docs.json` のナビゲーション構造を解析します。
* OpenAPIのエンドポイントページを生成するMDXページを特定します。
* MDXファイルのコンテンツを抽出し、OpenAPI仕様の `x-mint` 拡張に移動します。
* `docs.json` を更新し、MDXファイルではなくOpenAPIのエンドポイントを直接参照するようにします。
* 元のMDXエンドポイントファイルを削除します。

<Info>
  すでにエンドポイントに `x-mint` が定義されていて、同じエンドポイント向けのコンテンツを持つMDXページもある場合、MDXのコンテンツが既存の `x-mint` 設定を上書きします。

  同じエンドポイントに対して内容が異なる複数のMDXページがある場合、スクリプトは `docs.json` で最後に現れるページのコンテンツを使用します。

  この移行ツールは、適用前の変更プレビューをサポートしていません。
</Info>

<Steps>
  <Step title="OpenAPI仕様を準備する">
    OpenAPI仕様が有効で、ドキュメント化したいすべてのエンドポイントを含んでいることを確認してください。

    移行するMDXページには、エンドポイントを参照する `openapi:` フロントマターが必要です。

    <Tip>
      [Swagger Editor](https://editor.swagger.io/) または [Mint CLI](https://www.npmjs.com/package/mint) を使用して、OpenAPIファイルを検証してください。
    </Tip>
  </Step>

  <Step title="Mint CLIをインストールする">
    必要に応じて、[Mint CLI](/ja/installation) をインストールまたは更新してください。
  </Step>

  <Step title="移行コマンドを実行する">
    ```bash
    mint migrate-mdx
    ```
  </Step>
</Steps>

<div id="manual-migration-steps">
  ## 手動移行手順
</div>

<Steps>
  <Step title="OpenAPI仕様を準備します。">
    OpenAPI仕様が有効で、ドキュメント化したいすべてのエンドポイントを含んでいることを確認してください。

    メタデータやコンテンツをカスタマイズしたいエンドポイントには、`x-mint` 拡張機能を追加してください。詳細は [x-mint extension](/ja/api-playground/openapi-setup#x-mint-extension) を参照してください。

    ドキュメントから除外したいエンドポイントには、`x-hidden` 拡張機能を追加してください。

    <Info>
      [Swagger Editor](https://editor.swagger.io/) または [Mint CLI（mint）](https://www.npmjs.com/package/mint) を使用して OpenAPI ファイルを検証してください。
    </Info>
  </Step>

  <Step title="ナビゲーション構造を更新します。">
    `docs.json` 内の `MDX` ページ参照を OpenAPI のエンドポイントに置き換えてください。

    ```json
    "navigation": {
      "groups": [
        {
          "group": "API Reference",
          "openapi": "/path/to/openapi.json",
          "pages": [
            "overview",
            "authentication",
            "introduction",
            "GET /health",
            "quickstart", 
            "POST /users",
            "GET /users/{id}",
            "advanced-features"
          ]
        }
      ]
    }
    ```
  </Step>

  <Step title="古い MDX ファイルを削除します。">
    新しいナビゲーションが正しく機能することを確認したら、不要になった `MDX` のエンドポイントファイルを削除してください。
  </Step>
</Steps>

<div id="navigation-patterns">
  ## ナビゲーションパターン
</div>

ナビゲーションでのAPIドキュメントの表示方法をカスタマイズできます。

<div id="mixed-content-navigation">
  ### 混在コンテンツのナビゲーション
</div>

自動生成のAPIページとその他のページを組み合わせる:

```json
"navigation": {
  "groups": [
    {
      "group": "API Reference",
      "openapi": "openapi.json",
      "pages": [
        "api/overview",
        "GET /users",
        "POST /users", 
        "api/authentication"
      ]
    }
  ]
}
```

<div id="multiple-api-versions">
  ### 複数のAPIバージョン
</div>

タブまたはグループで異なるAPIバージョンを整理します:

```json
"navigation": {
  "tabs": [
    {
      "tab": "API v1",
      "openapi": "specs/v1.json"
    },
    {
      "tab": "API v2", 
      "openapi": "specs/v2.json"
    }
  ]
}
```

<div id="when-to-use-individual-mdx-pages">
  ## 個別の `MDX` ページを使うべきとき
</div>

次のような場合は、個別の `MDX` ページを保持することを検討してください:

* 各エンドポイントごとに、Reactコンポーネントや長めの例など、リッチなカスタムコンテンツが必要な場合
* 固有のページレイアウトが必要な場合
* 特定のエンドポイントで実験的なドキュメント手法を試す場合

ほとんどのユースケースでは、OpenAPI のナビゲーションの方が保守性と一貫性に優れます。