---
title: "CLI のインストール"
sidebarTitle: "インストール"
description: "CLI をインストールして、ドキュメントをローカルでプレビュー・開発する"
icon: "terminal"
---

<img className="block dark:hidden my-0 pointer-events-none" src="/images/installation/local-development-light.png" />

<img className="hidden dark:block my-0 pointer-events-none" src="/images/installation/local-development-dark.png" />

<div id="installing-the-cli">
  ## CLI のインストール
</div>

<Info>
  **前提条件**: 続行する前に [Node.js](https://nodejs.org/en) をインストールしてください。
</Info>

<Steps>
  <Step title="CLI をインストールする">
    [CLI](https://www.npmjs.com/package/mint) をインストールするには、次のコマンドを実行します:

    <CodeGroup>
      ```bash npm
      npm i -g mint
      ```

      ```bash pnpm
      pnpm add -g mint
      ```
    </CodeGroup>
  </Step>

  <Step title="ローカルでプレビューする">
    ドキュメントのディレクトリ（`docs.json` がある場所）に移動し、次のコマンドを実行します:

    ```bash
    mint dev
    ```

    ドキュメントのローカルプレビューは `http://localhost:3000` で確認できます。
  </Step>
</Steps>

CLI をグローバルにインストールしたくない場合は、次のワンタイムスクリプトを実行します:

```bash
npx mint dev
```

<div id="updates">
  ## 更新
</div>

ローカルのプレビューが本番環境のウェブ上の表示と同期していない場合は、ローカルの CLI を更新してください:

```bash
mint update
```

ローカル環境で `mint update` コマンドが利用できない場合は、CLI を最新バージョンで再インストールしてください:

<CodeGroup>
  ```bash npm
  npm i -g mint@latest
  ```

  ```bash pnpm
  pnpm add -g mint@latest
  ```
</CodeGroup>

<div id="custom-ports">
  ## カスタムポート
</div>

デフォルトでは CLI はポート 3000 を使用します。`--port` フラグでポートを変更できます。たとえば、CLI をポート 3333 で実行するには次のコマンドを使用します:

```bash
mint dev --port 3333
```

すでに使用中のポートで実行しようとした場合は、次に利用可能なポートが自動的に使用されます:

```mdx
Port 3000 is already in use. Trying 3001 instead.
```

<div id="previewing-as-a-specific-group">
  ## 特定のグループとしてプレビューする
</div>

ドキュメントへのアクセスを制限するために部分認証を使用している場合、`--group [groupname]` フラグを使って特定の認証グループとしてプレビューできます。

例として、`admin` という名前のグループがある場合は、次のコマンドでそのグループのメンバーとしてプレビューできます。

```bash
mint dev --group admin
```

<div id="additional-commands">
  ## 追加コマンド
</div>

`mint dev` は最もよく使われるコマンドですが、ドキュメンテーションを管理するために使えるコマンドは他にもあります。

<div id="finding-broken-links">
  ### リンク切れの検出
</div>

CLI は、ドキュメント内の参照リンクの検証を支援します。リンク切れを特定するには、次のコマンドを使用します:

```bash
mint broken-links
```

<div id="checking-openapi-spec">
  ### OpenAPI仕様の確認
</div>

次のコマンドで、CLIを使ってOpenAPIファイルのエラーをチェックできます。

```bash
mint openapi-check <openapiFilenameOrUrl>
```

ファイル名（例: `./openapi.yaml`）またはURL（例: `https://petstore3.swagger.io/api/v3/openapi.json`）を指定できます。

<div id="renaming-files">
  ### ファイル名の変更
</div>

次のコマンドで、ファイル名の変更と、当該ファイルへのすべての参照の更新を行えます。

```bash
mint rename <oldFilename> <newFilename>
```

<div id="migrating-mdx-endpoint-pages">
  ### MDX エンドポイントページの移行
</div>

次のコマンドで、OpenAPI 仕様から自動生成されるページへ MDX エンドポイントページを移行できます:

```bash
mint migrate-mdx
```

このコマンドは、個々の MDX エンドポイントページを `docs.json` に定義された自動生成ページに変換し、MDX コンテンツを OpenAPI 仕様の `x-mint` 拡張に移動し、ナビゲーションを更新します。詳しくは [Migrating from MDX](/ja/api-playground/migrating-from-mdx) を参照してください。

<div id="formatting">
  ## 書式設定
</div>

ローカル開発中は、IDE の拡張機能を使って `MDX` ファイルを認識し、整形することを推奨します。

Cursor、Windsurf、または VS Code を使用している場合は、構文ハイライトには [MDX VS Code extension](https://marketplace.visualstudio.com/items?itemName=unifiedjs.vscode-mdx)、コード整形には [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) を推奨します。

JetBrains を使用している場合は、構文ハイライトには [MDX IntelliJ IDEA plugin](https://plugins.jetbrains.com/plugin/14944-mdx)、コード整形には [Prettier](https://prettier.io/docs/webstorm) の設定を推奨します。

<div id="troubleshooting">
  ## トラブルシューティング
</div>

<AccordionGroup>
  <Accordion title="エラー: darwin-arm64 ランタイムで「sharp」モジュールを読み込めませんでした">
    古い Node のバージョンが原因の可能性があります。次をお試しください：

    1. 現在インストールされている Mint CLI をアンインストール：`npm uninstall -g mint`
    2. Node.js をアップグレード
    3. Mint CLI を再インストール：`npm install -g mint`
  </Accordion>

  <Accordion title="問題: 不明なエラーが発生する">
    **解決策**: デバイスのルートディレクトリに移動し、`~/.mintlify` フォルダを削除してください。その後、`mint dev` を再実行します。
  </Accordion>

  <Accordion title="エラー: permission denied">
    グローバルに Node パッケージをインストールするための必要な権限がないことが原因です。

    **解決策**: `sudo npm i -g mint` を実行してください。実行時に求められるのは、コンピュータのロック解除に使用するパスワードです。
  </Accordion>

  <Accordion title="ローカルプレビューがウェブ上のドキュメントと同じ見た目にならない">
    CLI のバージョンが古い可能性が高いです。

    **解決策:** `mint update` を実行して最新の変更を取得してください。
  </Accordion>

  <Accordion title="mintlify と mint パッケージ">
    CLI パッケージに問題がある場合は、まず `npm ls -g` を実行してください。このコマンドは、マシンにグローバルインストールされているパッケージを表示します。

    npm を使用していない、または -g のリストに見当たらない場合は、`which mint` を実行してインストール先を確認してください。

    `mint` と `mintlify` の両方がインストールされている場合は、`mintlify` をアンインストールしてください。

    1. 古いパッケージをアンインストール:

    ```bash
      npm uninstall -g mintlify
    ```

    2. npm キャッシュをクリア:

    ```bash
      npm cache clean --force
    ```

    3. 新しいパッケージを再インストール:

    ```bash
    npm i -g mint
    ```
  </Accordion>
</AccordionGroup>