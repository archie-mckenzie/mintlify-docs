---
title: "CI チェック"
description: "更新プロセスにリンク切れ、リント、文法チェックを追加する"
icon: "circle-check"
---

<Info>
  [Pro および Enterprise プラン](https://mintlify.com/pricing?ref=docs-ci)には、GitHub リポジトリ向けの CI チェックが含まれます。
</Info>

CI チェックを使ってドキュメントのエラーを検出し、デプロイ前に警告を出します。CI チェックは、設定したデプロイブランチへのコミット時、またはそのブランチへのプルリクエスト時に実行されるよう構成されています。

<div id="installation">
  ## インストール
</div>

まずは [GitHub](/ja/settings/github) ページの手順に従ってください。

GitHub Apps では、特定の1つのリポジトリにのみ権限を付与できます。ドキュメントをホストしているリポジトリへのアクセスだけが必要なため、その設定を強く推奨します。

<div id="configuration">
  ## 設定
</div>

デプロイで有効にするCIチェックは、ダッシュボードの[Add-ons](https://dashboard.mintlify.com/products/addons)ページで設定します。実行したいチェックを有効にしてください。

チェックを有効化する際は、`Warning`または`Blocking`レベルでの実行を選択できます。

* `Warning`レベルのチェックは、エラーや提案があっても失敗ステータスにはなりません。
* `Blocking`レベルのチェックは、未通過の場合や変更が提案された場合に失敗ステータスになります。

<div id="available-ci-checks">
  ## 使用可能なCIチェック
</div>

<div id="broken-links">
  ### リンク切れ
</div>

ローカル環境での[CLI link checker](/ja/settings/broken-links#broken-links)と同様に、ドキュメント内のリンク切れを自動で検査します。

結果を確認するには、対象のコミットの GitHub のチェック結果ページを開いてください。

<div id="vale">
  ### Vale
</div>

[Vale](https://vale.sh/) は、Markdown や MDX を含むさまざまなドキュメント形式に対応した、オープンソースのルールベース文章リンターです。

Mintlify は、CI チェックで Vale を自動実行し、結果をチェックステータスとして表示します。

<div id="configuration">
  #### 設定
</div>

デプロイのルートコンテンツディレクトリに `.vale.ini` ファイルがある場合は、その設定ファイルを自動的に使用します。指定した `stylesPath` 内の設定ファイルも自動的に使用します。

Vale の設定ファイルがない場合は、デフォルト設定が自動的に読み込まれます。

```mdx Default vale.ini configuration expandable
# Top level styles
StylesPath = /app/styles
MinAlertLevel = suggestion
IgnoredScopes = code, tt, img, url, a
SkippedScopes = script, style, pre, figure, code

# Vocabularies
Vocab = Mintlify

# Vale は公式には MDX をサポートしていないため必須
[formats]
mdx = md

# MDX support
[*.mdx]
BasedOnStyles = Vale
Vale.Terms = NO # 非常に厳しい大文字小文字ルールを強制するためオフのままにする

# `import ...`, `export ...`
# `<Component ... />`
# `<Component>...</Component>`
# `{ ... }`
TokenIgnores = (?sm)((?:import|export) .+?$), \
(?<!`)(<\w+ ?.+ ?\/>)(?!`), \
(<[A-Z]\w+>.+?<\/[A-Z]\w+>)

# 除外:
# `<Component \n ... />`
BlockIgnores = (?sm)^(<\w+\n .*\s\/>)$, \
(?sm)^({.+.*})

CommentDelimiters = {/*, */}
```

```text Default Vale vocabulary expandable
Mintlify
mintlify
VSCode
openapi
OpenAPI
Github
APIs

repo
npm
dev

Lorem
ipsum
impsum
amet

const
myName
myObject
bearerAuth
favicon
topbar
url
borderRadius
args
modeToggle
ModeToggle
isHidden
autoplay

_italic_
Strikethrough
Blockquotes
Blockquote
Singleline
Multiline

onboarding

async
await
boolean
enum
func
impl
init
instanceof
typeof
params
stdin
stdout
stderr
stdout
stdin
var
const
let
null
undefined
struct
bool

cors
csrf
env
xhr
xhr2
jwt
oauth
websocket
localhost
middleware
runtime
webhook
stdin
stdout

json
yaml
yml
md
txt
tsx
jsx
css
scss
html
png
jpg
svg

cdn
cli
css
dom
dto
env
git
gui
http
https
ide
jvm
mvc
orm
rpc
sdk
sql
ssh
ssl
tcp
tls
uri
url
ux
ui

nodejs
npm
yarn
pnpm
eslint
pytest
golang
rustc
kubectl
mongo
postgres
redis

JavaScript
TypeScript
Python
Ruby
Rust
Go
Golang
Java
Kotlin
Swift
Node.js
NodeJS
Deno

React
Vue
Angular
Next.js
Nuxt
Express
Django
Flask
Spring
Laravel
Redux
Vuex
TensorFlow
PostgreSQL
MongoDB
Redis
PNPM

Docker
Kubernetes
AWS
Azure
GCP
Terraform
Jenkins
CircleCI
GitLab
Heroku

Git
git
GitHub
GitLab
Bitbucket
VSCode
Visual Studio Code
IntelliJ
WebStorm
ESLint
eslint
Prettier
prettier
Webpack
webpack
Vite
vite
Babel
babel
Jest
jest
Mocha
Cypress
Postman

HTTP
HTTPS
OAuth
JWT
GraphQL
REST
WebSocket
TCP/IP

NPM
Yarn
PNPM
Pip
PIP
Cargo
RubyGems

Swagger
OpenAPI
Markdown
MDX
Storybook
TypeDoc
JSDoc

MySQL
PostgreSQL
MongoDB
Redis
Elasticsearch
DynamoDB

Linux
Unix
macOS
iOS

Firefox
Chromium
WebKit

config
ctx
desc
dir
elem
err
len
msg
num
obj
prev
proc
ptr
req
res
str
tmp
val
vars

todo
href
lang
nav
prev
next
toc
```

<Warning>
  セキュリティ上の理由により、絶対パスの `stylesPath` や、`..` を含む `stylesPath` はサポートできません。相対パスを使用し、リポジトリに `stylesPath` を含めてください。
</Warning>

<div id="packages">
  #### パッケージ
</div>

Vale は、スペルやスタイルの誤りを検出するために使用できる、各種の[パッケージ](https://vale.sh/docs/keys/packages)をサポートしています。
正しい `stylesPath` にリポジトリ内で追加したパッケージは、Vale の設定で自動的にインストールおよび使用されます。

リポジトリに含まれていないパッケージについては、[Vale package registry](https://vale.sh/explorer) から任意のパッケージを指定でき、Vale の設定で自動的にダウンロードおよび使用されます。

<Warning>
  セキュリティ上の理由により、[Vale package registry](https://vale.sh/explorer) 以外からのパッケージの自動ダウンロードはサポートしていません。ご了承ください。
</Warning>

<div id="vale-with-mdx">
  #### Vale と `MDX`
</div>

Vale はネイティブに `MDX` をサポートしていませんが、Vale の作者がサポート用の[カスタム拡張](https://github.com/errata-ai/MDX)を提供しています。

この拡張を使わない場合は、`.vale.ini` に次の行を追加することを推奨します:

```ini
[formats]
mdx = md

[*.mdx]
CommentDelimiters = {/*, */}

TokenIgnores = (?sm)((?:import|export) .+?$), \
(?<!`)(<\w+ ?.+ ?\/>)(?!`), \
(<[A-Z]\w+>.+?<\/[A-Z]\w+>)

BlockIgnores = (?sm)^(<\w+\n .*\s\/>)$, \
(?sm)^({.+.*})
```

Vale のドキュメント内コメントを使うには、MDX 形式のコメント `{/* ... */}` を使用します。設定で `CommentDelimiters = {/*, */}` の[設定](https://vale.sh/docs/keys/commentdelimiters)を有効にすると、Vale はリンティング時にこれらのコメントを自動解釈します。これにより、行やセクションのスキップなど、Vale の組み込み機能を簡単に利用できます。

```mdx
{/* vale off */}

This text will be ignored by Vale

{/* vale on */}
```

`CommentDelimiters` を使わずに Vale のコメントを用いる場合は、すべての Vale コメントを MDX コメント `{/* ... */}` で囲む必要があります。例:

```mdx
{/* <!-- vale off --> */}

This text will be ignored by Vale

{/* <!-- vale on --> */}
```

これらのコメントタグは Mintlify のコンポーネント内ではサポートされませんが、ドキュメントのベースレベルではどこでも使用できます。